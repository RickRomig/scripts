#!/usr/bin/env bash
###############################################################################
# Script Name  : install-audioapps
# Description  : Add repositiory and install mp3gain
# Dependencies : apt-get, add-apt-repository, dpkg, wget
# Arguments    : None
# Author       : Richard B. Romig, 01 March 2019
# Email        : rick.romig@gmail.com
# Comments     : Ubuntu-based Linux distributions (Debian does not support PPA)
# Also installs easyMP3Gain
# URL:https://launchpad.net/~flexiondotorg/+archive/ubuntu/audio
# https://sourceforge.net/projects/easymp3gain/files/easymp3gain%20i386/easymp3gain-0.5.0/"
# TODO (rick)  : Menu to select appliations to install.
# License      : GNU General Public License, version 2.0
###############################################################################

## Shellcheck Directives ##
# shellcheck source=/home/rick/bin/functionlib
# shellcheck disable=SC1091

## Load function library ##

if [[ -x "$HOME/bin/functionlib" ]]; then
  source "$HOME/bin/functionlib"
else
  echo -e "\e[91mERROR:\e[0m functionlib not found!" >&2
  exit 1
fi

## Variables ##

readonly _script=$(basename "$0")
readonly _version="v1.2.2"
readonly _updated="08 Apr 2022"

## Execution ##

user_in_sudo

# Update apt cache
sudo apt update -qq

clear
echo "$_script v$_version ($_updated)"
echo "Installs audio applications on Ubuntu-based systems."

# Install audio apps from repositories
echo $'\n'$"Installing audio applications and utilities from repositories."
sudo apt install asunder lame easytag audacity -yyq
echo $'\n'$"Audio applications and utilities installed."

# Install mp3gain:
# if support_ppa; then
  # local src_list="/etc/apt/sources.list.d/flexiondotorg-audio-bionic.list"
  # sudo add-apt-repository -y ppa:flexiondotorg/audio -y
  # sudo add-apt-repository ppa:flacon/ppa
  # sudo apt install mp3gain -yyq
# else
  # echo "PPA not supported. MP3Gain was not installed." >&2
# fi

# List apps installed

echo "Audio applications installed:"
exists asunder && echo -e "\tAsunder"
exists lame && echo -e "\tLame"
exists easytag  && exho -e "\tEasyTag"
exists audacity && echo -e "\tAudacity"
exists mpegain && echo -e "\tMP3Gain"

exit
